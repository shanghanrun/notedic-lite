<script lang="ts">
    import { searchUI } from '$lib/searchUI.svelte';
    import { onMount } from 'svelte';
    import SearchResultView from '../component/SearchResultView.svelte';
    import SideBar_FileImport from '../component/SideBar_FileImport.svelte';
    import UserSearchHeader from '../component/UserSearchHeader.svelte';

    onMount(() => {
        // í˜ì´ì§€ì— ë“¤ì–´ì˜¤ìë§ˆì ì´ì „ ìƒíƒœ ì´ˆê¸°í™”
        searchUI.reset();      
        console.log("ğŸ  í™ˆ í™”ë©´ ì§„ì…: ê²€ìƒ‰ ìƒíƒœë¥¼ ì´ˆê¸°í™”í–ˆìŠµë‹ˆë‹¤.");
    });
</script>

<div class="admin-container">
    <main class="col main-content">
        <UserSearchHeader item={searchUI} />
        <SearchResultView item={searchUI}/>
    </main>

    <aside class="col sidebar-column">
        <SideBar_FileImport />
    </aside>
</div>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');

    /* 1. ì „ì—­ ë¦¬ì…‹ ë° ëª¨ë°”ì¼ ìµœì í™” */
    :global(body), :global(html) {
        margin: 0;
        padding: 0;
        width: 100%;
        max-width: 100vw;
        overflow-x: hidden; /* ê°€ë¡œ ìŠ¤í¬ë¡¤ ì ˆëŒ€ ë°©ì§€ */
        background-color: #f8fafc; /* ì—°í•œ ë°°ê²½ìƒ‰ìœ¼ë¡œ ê°€ë…ì„± í–¥ìƒ */
    }

    :global(*) {
        font-family: 'Noto Sans KR', sans-serif !important;
        -webkit-font-smoothing: antialiased;
        box-sizing: border-box; /* íŒ¨ë”©ì´ í­ì„ ë„“íˆì§€ ì•Šë„ë¡ ê³ ì • */
    }
    
    /* 2. ë ˆì´ì•„ì›ƒ: ëª¨ë°”ì¼ ìš°ì„  (Mobile First) */
    .admin-container { 
        display: flex;
        flex-direction: column; /* ëª¨ë°”ì¼ì—ì„  ìœ„ì•„ë˜ë¡œ */
        gap: 15px; 
        padding: 10px; 
        width: 100%;
        min-height: 100vh; 
    }

    .col { 
        background: white; 
        border-radius: 12px; 
        display: flex; 
        flex-direction: column; 
        overflow: hidden; 
        box-shadow: 0 2px 10px rgba(0,0,0,0.03); 
        width: 100%;
    }

    /* 3. ë°ìŠ¤í¬í†± ëŒ€ì‘ (768px ì´ìƒ) */
    @media (min-width: 768px) {
        .admin-container { 
            display: grid; 
            grid-template-columns: 310px 1fr; /* ì‚¬ì´ë“œë°” ê³ ì •, ë‚˜ë¨¸ì§€ ë³¸ë¬¸ */
            gap: 20px; 
            padding: 20px; 
            max-width: 1400px; /* ë„ˆë¬´ ë„“ì–´ì§€ì§€ ì•Šê²Œ ìƒí•œì„  */
            margin: 0 auto;
        }

        .main-content {
            order: 2; /* ë°ìŠ¤í¬í†±ì—ì„  ì˜¤ë¥¸ìª½ì— ë°°ì¹˜ */
        }

        .sidebar-column {
            order: 1; /* ë°ìŠ¤í¬í†±ì—ì„  ì™¼ìª½ì— ë°°ì¹˜ */
            position: sticky;
            top: 20px;
            height: calc(100vh - 40px); /* í™”ë©´ì— ê³ ì • */
        }
    }

    /* 4. ëª¨ë°”ì¼ ë””í…Œì¼ ì¡°ì • (767px ì´í•˜) */
    @media (max-width: 767px) {
        .admin-container {
            display: flex;
            flex-direction: column; /* ìœ„ì•„ë˜ ë°°ì¹˜ */
        }

        .sidebar-column {
            order: 1; /* ğŸ¥‡ ì‘ì—… ìˆœì„œ 1ìˆœìœ„: íŒŒì¼ ì„í¬íŠ¸ê°€ ë§¨ ìœ„ë¡œ! */
            margin-bottom: 5px; 
        }

        .main-content {
            order: 2; /* ğŸ¥ˆ ê·¸ ë‹¤ìŒì´ ê²€ìƒ‰ì°½ê³¼ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ */
            min-height: 60vh;
        }

        :global(body) {
            font-size: 14px;
        }
    }
</style>